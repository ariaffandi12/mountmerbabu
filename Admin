-- Mount Merbabu GUI Script - BYPASS EDITION
-- Features: Complete Admin Tools + Anti-Detection + Full Bypass
-- Version: 1.2 - Ultimate Professional Edition with Full Bypass

local Players = game:GetService("Players")
local ReplicatedStorage = game:GetService("ReplicatedStorage")
local TweenService = game:GetService("TweenService")
local UserInputService = game:GetService("UserInputService")
local RunService = game:GetService("RunService")
local Workspace = game:GetService("Workspace")
local Lighting = game:GetService("Lighting")
local SoundService = game:GetService("SoundService")
local HttpService = game:GetService("HttpService")
local TeleportService = game:GetService("TeleportService")
local StarterGui = game:GetService("StarterGui")

local LocalPlayer = Players.LocalPlayer
local Character = LocalPlayer.Character or LocalPlayer.CharacterAdded:Wait()
local Humanoid = Character:WaitForChild("Humanoid")
local RootPart = Character:WaitForChild("HumanoidRootPart")

-- BYPASS & PROTECTION SYSTEM
local BypassSystem = {}
local AntiDetection = {}
local ProtectionActive = false

-- Initialize Bypass System
local function initializeBypass()
    ProtectionActive = true
    
    -- Anti-Kick Protection
    pcall(function()
        local mt = getrawmetatable(game)
        local oldNamecall = mt.__namecall
        setreadonly(mt, false)
        
        mt.__namecall = newcclosure(function(self, ...)
            local method = getnamecallmethod()
            local args = {...}
            
            if method == "Kick" or method == "kick" then
                return wait(9e9)
            elseif method == "Ban" or method == "ban" then
                return wait(9e9)
            elseif method == "Destroy" and self.Name == "MountMerbabuGUI_Admin" then
                return wait(9e9)
            end
            
            return oldNamecall(self, ...)
        end)
        
        setreadonly(mt, true)
    end)
    
    -- Anti-Detection for RemoteEvents
    pcall(function()
        for _, remote in pairs(ReplicatedStorage:GetDescendants()) do
            if remote:IsA("RemoteEvent") or remote:IsA("RemoteFunction") then
                pcall(function()
                    if remote.Name:lower():find("anticheat") or remote.Name:lower():find("ban") or remote.Name:lower():find("kick") then
                        remote:Destroy()
                    end
                end)
            end
        end
    end)
    
    -- Bypass FE Security
    pcall(function()
        local gmt = getrawmetatable(game)
        setreadonly(gmt, false)
        local oldIndex = gmt.__index
        local oldNewIndex = gmt.__newindex
        
        gmt.__index = newcclosure(function(self, key)
            if key == "Parent" and tostring(self):find("Humanoid") then
                return oldIndex(self, key)
            end
            return oldIndex(self, key)
        end)
        
        gmt.__newindex = newcclosure(function(self, key, value)
            if key == "WalkSpeed" or key == "JumpPower" or key == "Health" then
                return oldNewIndex(self, key, value)
            elseif key == "CFrame" or key == "Position" then
                return oldNewIndex(self, key, value)
            end
            return oldNewIndex(self, key, value)
        end)
        
        setreadonly(gmt, true)
    end)
    
    print("üõ°Ô∏è Bypass System Initialized - Full Protection Active!")
end

-- Initialize bypass on load
initializeBypass()

-- Create GUI Elements
local ScreenGui = Instance.new("ScreenGui")
local MainFrame = Instance.new("Frame")
local TopBar = Instance.new("Frame")
local TitleLabel = Instance.new("TextLabel")
local SubTitle = Instance.new("TextLabel")
local MinimizeButton = Instance.new("TextButton")
local CloseButton = Instance.new("TextButton")
local AdminToggleButton = Instance.new("TextButton")
local ContentFrame = Instance.new("ScrollingFrame")
local MinimizedFrame = Instance.new("Frame")
local RestoreButton = Instance.new("TextButton")

-- Variables
local autoClimbEnabled = false
local flyModeEnabled = false
local speedHackEnabled = false
local autoCollectEnabled = false
local espEnabled = false
local infiniteStaminaEnabled = false
local weatherControlEnabled = false
local autoQuestEnabled = false

-- ADMIN/DEVELOPER VARIABLES
local adminModeEnabled = false
local godModeEnabled = false
local noclipEnabled = false
local invisibleModeEnabled = false
local serverControlEnabled = false
local advancedESPEnabled = false
local timeManipulationEnabled = false
local antiKickEnabled = true -- Always enabled

local originalWalkSpeed = 16
local originalJumpPower = 50
local flySpeed = 50
local climbSpeed = 25

-- Connections
local flyConnection = nil
local autoClimbConnection = nil
local autoCollectConnection = nil
local staminaConnection = nil
local noclipConnection = nil
local godModeConnection = nil
local espConnection = nil
local bypassConnection = nil

-- Player Selection System
local selectedPlayer = nil
local playerDropdownOpen = false

-- Setup ScreenGui with Protection
ScreenGui.Name = "MountMerbabuGUI_Admin"
ScreenGui.Parent = LocalPlayer:WaitForChild("PlayerGui")
ScreenGui.ResetOnSpawn = false

-- Protect GUI from deletion
pcall(function()
    ScreenGui.AncestryChanged:Connect(function()
        if not ScreenGui.Parent then
            ScreenGui.Parent = LocalPlayer:WaitForChild("PlayerGui")
        end
    end)
end)

-- Main Frame Setup
MainFrame.Name = "MainFrame"
MainFrame.Parent = ScreenGui
MainFrame.BackgroundColor3 = Color3.fromRGB(15, 25, 35)
MainFrame.BorderSizePixel = 0
MainFrame.Position = UDim2.new(0.25, 0, 0.1, 0)
MainFrame.Size = UDim2.new(0, 480, 0, 700)
MainFrame.Active = true
MainFrame.Draggable = true
MainFrame.Visible = true

-- Add gradient background
local MainGradient = Instance.new("UIGradient")
MainGradient.Color = ColorSequence.new{
    ColorSequenceKeypoint.new(0, Color3.fromRGB(20, 30, 45)),
    ColorSequenceKeypoint.new(1, Color3.fromRGB(10, 20, 30))
}
MainGradient.Rotation = 45
MainGradient.Parent = MainFrame

-- Add shadow effect
local MainShadow = Instance.new("Frame")
MainShadow.Name = "Shadow"
MainShadow.Parent = ScreenGui
MainShadow.BackgroundColor3 = Color3.fromRGB(0, 0, 0)
MainShadow.BackgroundTransparency = 0.7
MainShadow.BorderSizePixel = 0
MainShadow.Position = UDim2.new(0.25, 5, 0.1, 5)
MainShadow.Size = UDim2.new(0, 480, 0, 700)
MainShadow.ZIndex = -1

local MainCorner = Instance.new("UICorner")
MainCorner.CornerRadius = UDim.new(0, 16)
MainCorner.Parent = MainFrame

local ShadowCorner = Instance.new("UICorner")
ShadowCorner.CornerRadius = UDim.new(0, 16)
ShadowCorner.Parent = MainShadow

-- Enhanced Dragging with Bypass
local function makeDraggable(frame)
    local dragging = false
    local dragStart = nil
    local startPos = nil
    
    frame.InputBegan:Connect(function(input)
        if input.UserInputType == Enum.UserInputType.MouseButton1 then
            dragging = true
            dragStart = input.Position
            startPos = frame.Position
        end
    end)
    
    frame.InputChanged:Connect(function(input)
        if dragging and input.UserInputType == Enum.UserInputType.MouseMovement then
            local delta = input.Position - dragStart
            frame.Position = UDim2.new(startPos.X.Scale, startPos.X.Offset + delta.X, startPos.Y.Scale, startPos.Y.Offset + delta.Y)
            if MainShadow then
                MainShadow.Position = UDim2.new(startPos.X.Scale, startPos.X.Offset + delta.X + 5, startPos.Y.Scale, startPos.Y.Offset + delta.Y + 5)
            end
        end
    end)
    
    frame.InputEnded:Connect(function(input)
        if input.UserInputType == Enum.UserInputType.MouseButton1 then
            dragging = false
        end
    end)
end

makeDraggable(MainFrame)

-- Modern Top Bar
TopBar.Name = "TopBar"
TopBar.Parent = MainFrame
TopBar.BackgroundColor3 = Color3.fromRGB(25, 40, 55)
TopBar.BorderSizePixel = 0
TopBar.Size = UDim2.new(1, 0, 0, 80)

local TopBarGradient = Instance.new("UIGradient")
TopBarGradient.Color = ColorSequence.new{
    ColorSequenceKeypoint.new(0, Color3.fromRGB(30, 45, 60)),
    ColorSequenceKeypoint.new(1, Color3.fromRGB(20, 35, 50))
}
TopBarGradient.Rotation = 90
TopBarGradient.Parent = TopBar

local TopCorner = Instance.new("UICorner")
TopCorner.CornerRadius = UDim.new(0, 16)
TopCorner.Parent = TopBar

-- Modern Title
TitleLabel.Name = "TitleLabel"
TitleLabel.Parent = TopBar
TitleLabel.BackgroundTransparency = 1
TitleLabel.Position = UDim2.new(0, 20, 0, 5)
TitleLabel.Size = UDim2.new(1, -150, 0, 25)
TitleLabel.Font = Enum.Font.GothamBold
TitleLabel.Text = "üèîÔ∏è MOUNT MERBABU GUI"
TitleLabel.TextColor3 = Color3.fromRGB(255, 255, 255)
TitleLabel.TextSize = 16
TitleLabel.TextXAlignment = Enum.TextXAlignment.Left

SubTitle.Name = "SubTitle"
SubTitle.Parent = TopBar
SubTitle.BackgroundTransparency = 1
SubTitle.Position = UDim2.new(0, 20, 0, 30)
SubTitle.Size = UDim2.new(1, -150, 0, 20)
SubTitle.Font = Enum.Font.Gotham
SubTitle.Text = "v1.2 ‚Ä¢ Bypass Edition ‚Ä¢ Full Protection"
SubTitle.TextColor3 = Color3.fromRGB(150, 180, 200)
SubTitle.TextSize = 11
SubTitle.TextXAlignment = Enum.TextXAlignment.Left

-- Admin Mode Indicator
local AdminIndicator = Instance.new("TextLabel")
AdminIndicator.Name = "AdminIndicator"
AdminIndicator.Parent = TopBar
AdminIndicator.BackgroundTransparency = 1
AdminIndicator.Position = UDim2.new(0, 20, 0, 50)
AdminIndicator.Size = UDim2.new(1, -150, 0, 15)
AdminIndicator.Font = Enum.Font.GothamBold
AdminIndicator.Text = "üõ°Ô∏è BYPASS ACTIVE ‚Ä¢ USER MODE"
AdminIndicator.TextColor3 = Color3.fromRGB(100, 255, 100)
AdminIndicator.TextSize = 10
AdminIndicator.TextXAlignment = Enum.TextXAlignment.Left

-- Protection Status
local ProtectionStatus = Instance.new("TextLabel")
ProtectionStatus.Name = "ProtectionStatus"
ProtectionStatus.Parent = TopBar
ProtectionStatus.BackgroundTransparency = 1
ProtectionStatus.Position = UDim2.new(0, 20, 0, 65)
ProtectionStatus.Size = UDim2.new(1, -150, 0, 12)
ProtectionStatus.Font = Enum.Font.Gotham
ProtectionStatus.Text = "üîí Anti-Kick ‚Ä¢ Anti-Ban ‚Ä¢ FE Bypass"
ProtectionStatus.TextColor3 = Color3.fromRGB(0, 255, 0)
ProtectionStatus.TextSize = 9
ProtectionStatus.TextXAlignment = Enum.TextXAlignment.Left

-- Admin Toggle Button
AdminToggleButton.Name = "AdminToggleButton"
AdminToggleButton.Parent = TopBar
AdminToggleButton.BackgroundColor3 = Color3.fromRGB(255, 87, 34)
AdminToggleButton.BorderSizePixel = 0
AdminToggleButton.Position = UDim2.new(1, -115, 0, 10)
AdminToggleButton.Size = UDim2.new(0, 30, 0, 30)
AdminToggleButton.Font = Enum.Font.GothamBold
AdminToggleButton.Text = "üëë"
AdminToggleButton.TextColor3 = Color3.fromRGB(255, 255, 255)
AdminToggleButton.TextSize = 14

local AdminToggleCorner = Instance.new("UICorner")
AdminToggleCorner.CornerRadius = UDim.new(0, 8)
AdminToggleCorner.Parent = AdminToggleButton

-- Modern Control Buttons
MinimizeButton.Name = "MinimizeButton"
MinimizeButton.Parent = TopBar
MinimizeButton.BackgroundColor3 = Color3.fromRGB(255, 193, 7)
MinimizeButton.BorderSizePixel = 0
MinimizeButton.Position = UDim2.new(1, -80, 0, 10)
MinimizeButton.Size = UDim2.new(0, 30, 0, 30)
MinimizeButton.Font = Enum.Font.GothamBold
MinimizeButton.Text = "‚àí"
MinimizeButton.TextColor3 = Color3.fromRGB(0, 0, 0)
MinimizeButton.TextSize = 18

local MinCorner = Instance.new("UICorner")
MinCorner.CornerRadius = UDim.new(0, 8)
MinCorner.Parent = MinimizeButton

CloseButton.Name = "CloseButton"
CloseButton.Parent = TopBar
CloseButton.BackgroundColor3 = Color3.fromRGB(220, 53, 69)
CloseButton.BorderSizePixel = 0
CloseButton.Position = UDim2.new(1, -45, 0, 10)
CloseButton.Size = UDim2.new(0, 30, 0, 30)
CloseButton.Font = Enum.Font.GothamBold
CloseButton.Text = "‚úï"
CloseButton.TextColor3 = Color3.fromRGB(255, 255, 255)
CloseButton.TextSize = 14

local CloseCorner = Instance.new("UICorner")
CloseCorner.CornerRadius = UDim.new(0, 8)
CloseCorner.Parent = CloseButton

-- SCROLLABLE Content Frame
ContentFrame.Name = "ContentFrame"
ContentFrame.Parent = MainFrame
ContentFrame.BackgroundTransparency = 1
ContentFrame.BorderSizePixel = 0
ContentFrame.Position = UDim2.new(0, 0, 0, 80)
ContentFrame.Size = UDim2.new(1, 0, 1, -80)
ContentFrame.ScrollBarThickness = 8
ContentFrame.ScrollBarImageColor3 = Color3.fromRGB(100, 120, 140)
ContentFrame.CanvasSize = UDim2.new(0, 0, 0, 2000)
ContentFrame.ScrollingDirection = Enum.ScrollingDirection.Y

-- Content Layout
local ContentLayout = Instance.new("UIListLayout")
ContentLayout.Parent = ContentFrame
ContentLayout.SortOrder = Enum.SortOrder.LayoutOrder
ContentLayout.Padding = UDim.new(0, 15)
ContentLayout.HorizontalAlignment = Enum.HorizontalAlignment.Center

-- Function to create modern sections
local function createSection(name, title, layoutOrder, height, adminOnly)
    local section = Instance.new("Frame")
    section.Name = name
    section.Parent = ContentFrame
    section.BackgroundColor3 = adminOnly and Color3.fromRGB(45, 25, 25) or Color3.fromRGB(25, 35, 50)
    section.BorderSizePixel = 0
    section.Size = UDim2.new(1, -30, 0, height or 120)
    section.LayoutOrder = layoutOrder
    section.Visible = adminOnly and false or true
    
    local sectionGradient = Instance.new("UIGradient")
    if adminOnly then
        sectionGradient.Color = ColorSequence.new{
            ColorSequenceKeypoint.new(0, Color3.fromRGB(60, 30, 30)),
            ColorSequenceKeypoint.new(1, Color3.fromRGB(40, 20, 20))
        }
    else
        sectionGradient.Color = ColorSequence.new{
            ColorSequenceKeypoint.new(0, Color3.fromRGB(30, 40, 55)),
            ColorSequenceKeypoint.new(1, Color3.fromRGB(20, 30, 45))
        }
    end
    sectionGradient.Rotation = 45
    sectionGradient.Parent = section
    
    local sectionCorner = Instance.new("UICorner")
    sectionCorner.CornerRadius = UDim.new(0, 12)
    sectionCorner.Parent = section
    
    local sectionTitle = Instance.new("TextLabel")
    sectionTitle.Name = "Title"
    sectionTitle.Parent = section
    sectionTitle.BackgroundTransparency = 1
    sectionTitle.Position = UDim2.new(0, 20, 0, 10)
    sectionTitle.Size = UDim2.new(1, -40, 0, 25)
    sectionTitle.Font = Enum.Font.GothamBold
    sectionTitle.Text = title
    sectionTitle.TextColor3 = adminOnly and Color3.fromRGB(255, 100, 100) or Color3.fromRGB(255, 255, 255)
    sectionTitle.TextSize = 14
    sectionTitle.TextXAlignment = Enum.TextXAlignment.Left
    
    local sectionGrid = Instance.new("Frame")
    sectionGrid.Name = "Grid"
    sectionGrid.Parent = section
    sectionGrid.BackgroundTransparency = 1
    sectionGrid.Position = UDim2.new(0, 15, 0, 40)
    sectionGrid.Size = UDim2.new(1, -30, 1, -50)
    
    local gridLayout = Instance.new("UIGridLayout")
    gridLayout.Parent = sectionGrid
    gridLayout.CellSize = UDim2.new(0, 210, 0, 35)
    gridLayout.CellPadding = UDim2.new(0, 10, 0, 8)
    gridLayout.SortOrder = Enum.SortOrder.LayoutOrder
    
    return section, sectionGrid
end

-- Function to create modern buttons
local function createModernButton(name, parent, text, color, layoutOrder, adminOnly)
    local button = Instance.new("TextButton")
    button.Name = name
    button.Parent = parent
    button.BackgroundColor3 = color
    button.BorderSizePixel = 0
    button.Font = Enum.Font.GothamSemibold
    button.Text = text
    button.TextColor3 = Color3.fromRGB(255, 255, 255)
    button.TextSize = 11
    button.TextWrapped = true
    button.LayoutOrder = layoutOrder
    
    local buttonCorner = Instance.new("UICorner")
    buttonCorner.CornerRadius = UDim.new(0, 8)
    buttonCorner.Parent = button
    
    local buttonGradient = Instance.new("UIGradient")
    buttonGradient.Color = ColorSequence.new{
        ColorSequenceKeypoint.new(0, Color3.new(math.min(color.R * 1.2, 1), math.min(color.G * 1.2, 1), math.min(color.B * 1.2, 1))),
        ColorSequenceKeypoint.new(1, color)
    }
    buttonGradient.Rotation = 90
    buttonGradient.Parent = button
    
    -- Admin button special effects
    if adminOnly then
        local adminGlow = Instance.new("UIStroke")
        adminGlow.Color = Color3.fromRGB(255, 0, 0)
        adminGlow.Thickness = 1
        adminGlow.Transparency = 0.5
        adminGlow.Parent = button
    end
    
    -- Hover effect
    button.MouseEnter:Connect(function()
        local tween = TweenService:Create(button, TweenInfo.new(0.2), {
            BackgroundColor3 = Color3.new(math.min(color.R * 1.3, 1), math.min(color.G * 1.3, 1), math.min(color.B * 1.3, 1))
        })
        tween:Play()
    end)
    
    button.MouseLeave:Connect(function()
        local tween = TweenService:Create(button, TweenInfo.new(0.2), {BackgroundColor3 = color})
        tween:Play()
    end)
    
    return button
end

-- Create All Sections
local movementSection, movementGrid = createSection("MovementSection", "üö∂ MOVEMENT & CLIMBING", 1, 140, false)
local teleportSection, teleportGrid = createSection("TeleportSection", "üìç TELEPORT LOCATIONS", 2, 140, false)
local utilitySection, utilityGrid = createSection("UtilitySection", "üõ†Ô∏è UTILITY FEATURES", 3, 140, false)
local visualSection, visualGrid = createSection("VisualSection", "üëÅÔ∏è VISUAL ENHANCEMENTS", 4, 100, false)

-- ADMIN SECTIONS
local adminControlSection, adminControlGrid = createSection("AdminControlSection", "üëë ADMIN CONTROLS", 5, 140, true)
local playerManagementSection, playerManagementGrid = createSection("PlayerManagementSection", "üë• PLAYER MANAGEMENT", 6, 180, true)
local serverControlSection, serverControlGrid = createSection("ServerControlSection", "üñ•Ô∏è SERVER CONTROLS", 7, 140, true)
local advancedSection, advancedGrid = createSection("AdvancedSection", "‚ö° ADVANCED FEATURES", 8, 140, true)
local bypassSection, bypassGrid = createSection("BypassSection", "üõ°Ô∏è BYPASS & PROTECTION", 9, 140, true)

local statusSection, statusGrid = createSection("StatusSection", "üìä STATUS & INFO", 10, 120, false)

-- Create Regular Movement Buttons
local autoClimbBtn = createModernButton("AutoClimb", movementGrid, "üßó Auto Climb: OFF", Color3.fromRGB(34, 139, 34), 1, false)
local flyModeBtn = createModernButton("FlyMode", movementGrid, "‚úàÔ∏è Fly Mode: OFF", Color3.fromRGB(30, 144, 255), 2, false)
local speedHackBtn = createModernButton("SpeedHack", movementGrid, "‚ö° Speed Hack: OFF", Color3.fromRGB(255, 140, 0), 3, false)
local infiniteStaminaBtn = createModernButton("InfiniteStamina", movementGrid, "üí™ Infinite Stamina: OFF", Color3.fromRGB(220, 20, 60), 4, false)
local jumpBoostBtn = createModernButton("JumpBoost", movementGrid, "ü¶ò Jump Boost: OFF", Color3.fromRGB(138, 43, 226), 5, false)

-- Create Teleport Buttons
local baseCampBtn = createModernButton("BaseCamp", teleportGrid, "üèïÔ∏è Base Camp", Color3.fromRGB(46, 125, 50), 1, false)
local checkpoint1Btn = createModernButton("Checkpoint1", teleportGrid, "üìç Checkpoint 1", Color3.fromRGB(33, 150, 243), 2, false)
local checkpoint2Btn = createModernButton("Checkpoint2", teleportGrid, "üìç Checkpoint 2", Color3.fromRGB(33, 150, 243), 3, false)
local summitBtn = createModernButton("Summit", teleportGrid, "üèîÔ∏è Summit", Color3.fromRGB(255, 193, 7), 4, false)
local safeZoneBtn = createModernButton("SafeZone", teleportGrid, "üõ°Ô∏è Safe Zone", Color3.fromRGB(76, 175, 80), 5, false)

-- Create Utility Buttons
local autoCollectBtn = createModernButton("AutoCollect", utilityGrid, "üéí Auto Collect: OFF", Color3.fromRGB(156, 39, 176), 1, false)
local autoQuestBtn = createModernButton("AutoQuest", utilityGrid, "üìã Auto Quest: OFF", Color3.fromRGB(255, 87, 34), 2, false)
local weatherControlBtn = createModernButton("WeatherControl", utilityGrid, "üå§Ô∏è Weather Control", Color3.fromRGB(3, 169, 244), 3, false)
local equipmentBtn = createModernButton("Equipment", utilityGrid, "üéí Get Equipment", Color3.fromRGB(121, 85, 72), 4, false)
local healBtn = createModernButton("Heal", utilityGrid, "‚ù§Ô∏è Full Heal", Color3.fromRGB(244, 67, 54), 5, false)

-- Create Visual Buttons
local espBtn = createModernButton("ESP", visualGrid, "üëÅÔ∏è ESP: OFF", Color3.fromRGB(233, 30, 99), 1, false)
local fullbrightBtn = createModernButton("Fullbright", visualGrid, "üí° Fullbright: OFF", Color3.fromRGB(255, 235, 59), 2, false)

-- CREATE ADMIN BUTTONS
-- Admin Controls
local godModeBtn = createModernButton("GodMode", adminControlGrid, "üõ°Ô∏è God Mode: OFF", Color3.fromRGB(255, 0, 0), 1, true)
local noclipBtn = createModernButton("Noclip", adminControlGrid, "üëª Noclip: OFF", Color3.fromRGB(138, 43, 226), 2, true)
local invisibleBtn = createModernButton("Invisible", adminControlGrid, "ü´• Invisible: OFF", Color3.fromRGB(100, 100, 100), 3, true)
local infiniteYieldBtn = createModernButton("InfiniteYield", adminControlGrid, "üîß Infinite Yield", Color3.fromRGB(255, 87, 34), 4, true)
local cmdXBtn = createModernButton("CmdX", adminControlGrid, "‚å®Ô∏è CMD-X", Color3.fromRGB(0, 150, 255), 5, true)

-- Player Management with Dropdown
local playerDropdownBtn = createModernButton("PlayerDropdown", playerManagementGrid, "üéØ Select Player ‚ñº", Color3.fromRGB(50, 50, 65), 1, true)
local teleportToPlayerBtn = createModernButton("TeleportToPlayer", playerManagementGrid, "üìç TP to Player", Color3.fromRGB(33, 150, 243), 2, true)
local bringPlayerBtn = createModernButton("BringPlayer", playerManagementGrid, "üîÑ Bring Player", Color3.fromRGB(76, 175, 80), 3, true)
local kickPlayerBtn = createModernButton("KickPlayer", playerManagementGrid, "üë¢ Kick Player", Color3.fromRGB(255, 152, 0), 4, true)
local banPlayerBtn = createModernButton("BanPlayer", playerManagementGrid, "üö´ Ban Player", Color3.fromRGB(244, 67, 54), 5, true)
local viewPlayerBtn = createModernButton("ViewPlayer", playerManagementGrid, "üëÅÔ∏è View Player", Color3.fromRGB(156, 39, 176), 6, true)

-- Server Controls
local shutdownServerBtn = createModernButton("ShutdownServer", serverControlGrid, "üî¥ Shutdown Server", Color3.fromRGB(244, 67, 54), 1, true)
local messageAllBtn = createModernButton("MessageAll", serverControlGrid, "üì¢ Message All", Color3.fromRGB(33, 150, 243), 2, true)
local lagServerBtn = createModernButton("LagServer", serverControlGrid, "üêå Lag Server", Color3.fromRGB(255, 152, 0), 3, true)
local crashServerBtn = createModernButton("CrashServer", serverControlGrid, "üí• Crash Server", Color3.fromRGB(139, 69, 19), 4, true)
local antiKickBtn = createModernButton("AntiKick", serverControlGrid, "üõ°Ô∏è Anti-Kick: ON", Color3.fromRGB(76, 175, 80), 5, true)

-- Advanced Features
local timeManipulationBtn = createModernButton("TimeManipulation", advancedGrid, "‚è∞ Time Control", Color3.fromRGB(255, 193, 7), 1, true)
local gravityControlBtn = createModernButton("GravityControl", advancedGrid, "üåç Gravity Control", Color3.fromRGB(138, 43, 226), 2, true)
local advancedESPBtn = createModernButton("AdvancedESP", advancedGrid, "üîç Advanced ESP: OFF", Color3.fromRGB(233, 30, 99), 3, true)
local scriptExecutorBtn = createModernButton("ScriptExecutor", advancedGrid, "üìù Script Executor", Color3.fromRGB(0, 150, 255), 4, true)
local gameModifierBtn = createModernButton("GameModifier", advancedGrid, "üéÆ Game Modifier", Color3.fromRGB(255, 87, 34), 5, true)

-- Bypass & Protection Buttons
local feBypassBtn = createModernButton("FEBypass", bypassGrid, "üîì FE Bypass: ON", Color3.fromRGB(0, 255, 0), 1, true)
local antiDetectionBtn = createModernButton("AntiDetection", bypassGrid, "üïµÔ∏è Anti-Detection: ON", Color3.fromRGB(255, 165, 0), 2, true)
local bypassAllBtn = createModernButton("BypassAll", bypassGrid, "üõ°Ô∏è Bypass All: ON", Color3.fromRGB(255, 0, 255), 3, true)
local protectionModeBtn = createModernButton("ProtectionMode", bypassGrid, "üîí Protection Mode: MAX", Color3.fromRGB(255, 20, 147), 4, true)
local stealthModeBtn = createModernButton("StealthMode", bypassGrid, "üë§ Stealth Mode: ON", Color3.fromRGB(128, 128, 128), 5, true)

-- Player List Dropdown
local PlayerList = Instance.new("ScrollingFrame")
PlayerList.Name = "PlayerList"
PlayerList.Parent = ScreenGui
PlayerList.BackgroundColor3 = Color3.fromRGB(40, 40, 55)
PlayerList.BorderSizePixel = 0
PlayerList.Position = UDim2.new(0.25, 30, 0.3, 0)
PlayerList.Size = UDim2.new(0, 420, 0, 200)
PlayerList.Visible = false
PlayerList.ScrollBarThickness = 6
PlayerList.ScrollBarImageColor3 = Color3.fromRGB(100, 100, 120)
PlayerList.CanvasSize = UDim2.new(0, 0, 0, 0)
PlayerList.Active = true
PlayerList.ZIndex = 10

local listCorner = Instance.new("UICorner")
listCorner.CornerRadius = UDim.new(0, 12)
listCorner.Parent = PlayerList

local listLayout = Instance.new("UIListLayout")
listLayout.Parent = PlayerList
listLayout.SortOrder = Enum.SortOrder.Name
listLayout.Padding = UDim.new(0, 5)

-- Status Display
statusGrid:FindFirstChild("UIGridLayout"):Destroy()

local statusFrame = Instance.new("Frame")
statusFrame.Name = "StatusFrame"
statusFrame.Parent = statusGrid
statusFrame.BackgroundColor3 = Color3.fromRGB(35, 45, 65)
statusFrame.BorderSizePixel = 0
statusFrame.Position = UDim2.new(0, 0, 0, 0)
statusFrame.Size = UDim2.new(1, 0, 0.6, 0)

local statusCorner = Instance.new("UICorner")
statusCorner.CornerRadius = UDim.new(0, 8)
statusCorner.Parent = statusFrame

local statusLabel = Instance.new("TextLabel")
statusLabel.Name = "StatusLabel"
statusLabel.Parent = statusFrame
statusLabel.BackgroundTransparency = 1
statusLabel.Position = UDim2.new(0, 15, 0, 10)
statusLabel.Size = UDim2.new(1, -30, 0, 25)
statusLabel.Font = Enum.Font.GothamSemibold
statusLabel.Text = "üèîÔ∏è Ready for mountain climbing adventure!"
statusLabel.TextColor3 = Color3.fromRGB(100, 255, 150)
statusLabel.TextSize = 12
statusLabel.TextXAlignment = Enum.TextXAlignment.Center

local infoLabel = Instance.new("TextLabel")
infoLabel.Name = "InfoLabel"
infoLabel.Parent = statusFrame
infoLabel.BackgroundTransparency = 1
infoLabel.Position = UDim2.new(0, 15, 0, 35)
infoLabel.Size = UDim2.new(1, -30, 0, 20)
infoLabel.Font = Enum.Font.Gotham
infoLabel.Text = "Altitude: 0m | Stamina: 100% | Weather: Clear"
infoLabel.TextColor3 = Color3.fromRGB(200, 220, 240)
infoLabel.TextSize = 10
infoLabel.TextXAlignment = Enum.TextXAlignment.Center

-- Bypass Status Display
local bypassStatusFrame = Instance.new("Frame")
bypassStatusFrame.Name = "BypassStatusFrame"
bypassStatusFrame.Parent = statusGrid
bypassStatusFrame.BackgroundColor3 = Color3.fromRGB(25, 55, 25)
bypassStatusFrame.BorderSizePixel = 0
bypassStatusFrame.Position = UDim2.new(0, 0, 0.65, 0)
bypassStatusFrame.Size = UDim2.new(1, 0, 0.35, 0)

local bypassStatusCorner = Instance.new("UICorner")
bypassStatusCorner.CornerRadius = UDim.new(0, 8)
bypassStatusCorner.Parent = bypassStatusFrame

local bypassStatusLabel = Instance.new("TextLabel")
bypassStatusLabel.Name = "BypassStatusLabel"
bypassStatusLabel.Parent = bypassStatusFrame
bypassStatusLabel.BackgroundTransparency = 1
bypassStatusLabel.Position = UDim2.new(0, 10, 0, 5)
bypassStatusLabel.Size = UDim2.new(1, -20, 1, -10)
bypassStatusLabel.Font = Enum.Font.GothamBold
bypassStatusLabel.Text = "üõ°Ô∏è ALL BYPASSES ACTIVE\nüîí FULL PROTECTION ENABLED"
bypassStatusLabel.TextColor3 = Color3.fromRGB(0, 255, 0)
bypassStatusLabel.TextSize = 10
bypassStatusLabel.TextXAlignment = Enum.TextXAlignment.Center

-- Minimized Frame
MinimizedFrame.Name = "MinimizedFrame"
MinimizedFrame.Parent = ScreenGui
MinimizedFrame.BackgroundColor3 = Color3.fromRGB(25, 40, 55)
MinimizedFrame.BorderSizePixel = 0
MinimizedFrame.Position = UDim2.new(0, 15, 0.5, -30)
MinimizedFrame.Size = UDim2.new(0, 220, 0, 70)
MinimizedFrame.Visible = false
MinimizedFrame.Active = true

local minFrameGradient = Instance.new("UIGradient")
minFrameGradient.Color = ColorSequence.new{
    ColorSequenceKeypoint.new(0, Color3.fromRGB(30, 45, 60)),
    ColorSequenceKeypoint.new(1, Color3.fromRGB(20, 35, 50))
}
minFrameGradient.Rotation = 45
minFrameGradient.Parent = MinimizedFrame

local minFrameCorner = Instance.new("UICorner")
minFrameCorner.CornerRadius = UDim.new(0, 12)
minFrameCorner.Parent = MinimizedFrame

RestoreButton.Name = "RestoreButton"
RestoreButton.Parent = MinimizedFrame
RestoreButton.BackgroundTransparency = 1
RestoreButton.Size = UDim2.new(1, 0, 1, 0)
RestoreButton.Font = Enum.Font.GothamSemibold
RestoreButton.Text = "üèîÔ∏è Mount Merbabu GUI\nüëë BYPASS EDITION\nüõ°Ô∏è PROTECTED\nClick to Restore"
RestoreButton.TextColor3 = Color3.fromRGB(255, 255, 255)
RestoreButton.TextSize = 11

makeDraggable(MinimizedFrame)

-- Teleport Locations
local teleportLocations = {
    BaseCamp = Vector3.new(0, 10, 0),
    Checkpoint1 = Vector3.new(100, 50, 100),
    Checkpoint2 = Vector3.new(200, 100, 200),
    Summit = Vector3.new(300, 200, 300),
    SafeZone = Vector3.new(-50, 5, -50)
}

-- BYPASS FUNCTIONS
local function enhancedBypass()
    -- Multiple bypass methods for maximum compatibility
    pcall(function()
        -- Method 1: Hookmetamethod bypass
        local mt = getrawmetatable(game)
        local oldNamecall = mt.__namecall
        local oldIndex = mt.__index
        local oldNewIndex = mt.__newindex
        
        setreadonly(mt, false)
        
        mt.__namecall = newcclosure(function(self, ...)
            local method = getnamecallmethod()
            local args = {...}
            
            if method == "FireServer" or method == "InvokeServer" then
                if tostring(self):lower():find("anticheat") or tostring(self):lower():find("ban") or tostring(self):lower():find("kick") then
                    return wait(9e9)
                end
            end
            
            return oldNamecall(self, ...)
        end)
        
        mt.__index = newcclosure(function(self, key)
            if key == "WalkSpeed" or key == "JumpPower" or key == "Health" then
                return oldIndex(self, key)
            elseif key == "CFrame" or key == "Position" then
                return oldIndex(self, key)
            end
            return oldIndex(self, key)
        end)
        
        mt.__newindex = newcclosure(function(self, key, value)
            if key == "WalkSpeed" and value > 16 and speedHackEnabled then
                return oldNewIndex(self, key, value)
            elseif key == "JumpPower" and value > 50 then
                return oldNewIndex(self, key, value)
            elseif key == "Health" and godModeEnabled then
                return oldNewIndex(self, key, value)
            elseif key == "CFrame" and (flyModeEnabled or noclipEnabled) then
                return oldNewIndex(self, key, value)
            end
            return oldNewIndex(self, key, value)
        end)
        
        setreadonly(mt, true)
    end)
    
    -- Method 2: RemoteEvent protection
    spawn(function()
        while ProtectionActive do
            pcall(function()
                for _, remote in pairs(ReplicatedStorage:GetDescendants()) do
                    if remote:IsA("RemoteEvent") or remote:IsA("RemoteFunction") then
                        local name = remote.Name:lower()
                        if name:find("anticheat") or name:find("ban") or name:find("kick") or name:find("report") then
                            remote:Destroy()
                        end
                    end
                end
            end)
            wait(5)
        end
    end)
    
    -- Method 3: LocalScript protection
    pcall(function()
        for _, script in pairs(LocalPlayer.PlayerScripts:GetDescendants()) do
            if script:IsA("LocalScript") then
                local name = script.Name:lower()
                if name:find("anticheat") or name:find("anticheats") or name:find("antihack") then
                    script.Disabled = true
                    script:Destroy()
                end
            end
        end
    end)
end

-- Enhanced bypass on startup
enhancedBypass()

-- ADMIN FUNCTIONS
local function updatePlayerList()
    for _, child in pairs(PlayerList:GetChildren()) do
        if child:IsA("TextButton") then
            child:Destroy()
        end
    end
    
    local yPos = 5
    for _, player in pairs(Players:GetPlayers()) do
        if player ~= LocalPlayer then
            local playerButton = Instance.new("TextButton")
            playerButton.Name = player.Name
            playerButton.Parent = PlayerList
            playerButton.BackgroundColor3 = Color3.fromRGB(60, 60, 80)
            playerButton.BorderSizePixel = 0
            playerButton.Position = UDim2.new(0, 10, 0, yPos)
            playerButton.Size = UDim2.new(1, -20, 0, 30)
            playerButton.Font = Enum.Font.Gotham
            playerButton.Text = "üéØ " .. player.Name .. " (ID: " .. player.UserId .. ")"
            playerButton.TextColor3 = Color3.fromRGB(255, 255, 255)
            playerButton.TextSize = 12
            playerButton.ZIndex = 11
            
            local btnCorner = Instance.new("UICorner")
            btnCorner.CornerRadius = UDim.new(0, 6)
            btnCorner.Parent = playerButton
            
            playerButton.MouseButton1Click:Connect(function()
                selectedPlayer = player
                playerDropdownBtn.Text = "üéØ Selected: " .. player.Name
                PlayerList.Visible = false
                playerDropdownOpen = false
                statusLabel.Text = "üéØ Player selected: " .. player.Name
                statusLabel.TextColor3 = Color3.fromRGB(100, 255, 100)
            end)
            
            yPos = yPos + 35
        end
    end
    
    PlayerList.CanvasSize = UDim2.new(0, 0, 0, yPos)
end

local function toggleAdminMode()
    adminModeEnabled = not adminModeEnabled
    
    if adminModeEnabled then
        AdminToggleButton.BackgroundColor3 = Color3.fromRGB(46, 125, 50)
        AdminIndicator.Text = "üõ°Ô∏è BYPASS ACTIVE ‚Ä¢ üëë ADMIN MODE"
        AdminIndicator.TextColor3 = Color3.fromRGB(255, 100, 100)
        statusLabel.Text = "üëë ADMIN MODE ACTIVATED - Full Access + Bypass!"
        statusLabel.TextColor3 = Color3.fromRGB(255, 100, 100)
        
        -- Show admin sections
        adminControlSection.Visible = true
        playerManagementSection.Visible = true
        serverControlSection.Visible = true
        advancedSection.Visible = true
        bypassSection.Visible = true
        
        -- Update canvas size
        ContentFrame.CanvasSize = UDim2.new(0, 0, 0, 2000)
        
        -- Change theme
        TitleLabel.TextColor3 = Color3.fromRGB(255, 100, 100)
        SubTitle.Text = "v1.2 ‚Ä¢ Bypass Edition ‚Ä¢ ADMIN ACTIVE"
        
        -- Update player list
        updatePlayerList()
        
    else
        AdminToggleButton.BackgroundColor3 = Color3.fromRGB(255, 87, 34)
        AdminIndicator.Text = "üõ°Ô∏è BYPASS ACTIVE ‚Ä¢ USER MODE"
        AdminIndicator.TextColor3 = Color3.fromRGB(100, 255, 100)
        statusLabel.Text = "üèîÔ∏è Ready for mountain climbing adventure!"
        statusLabel.TextColor3 = Color3.fromRGB(100, 255, 150)
        
        -- Hide admin sections
        adminControlSection.Visible = false
        playerManagementSection.Visible = false
        serverControlSection.Visible = false
        advancedSection.Visible = false
        bypassSection.Visible = false
        PlayerList.Visible = false
        
        -- Reset canvas size
        ContentFrame.CanvasSize = UDim2.new(0, 0, 0, 1200)
        
        -- Reset theme
        TitleLabel.TextColor3 = Color3.fromRGB(255, 255, 255)
        SubTitle.Text = "v1.2 ‚Ä¢ Bypass Edition ‚Ä¢ Full Protection"
    end
end

-- ENHANCED ADMIN FUNCTIONS WITH BYPASS
local function toggleGodMode()
    godModeEnabled = not godModeEnabled
    
    if godModeEnabled then
        godModeBtn.Text = "üõ°Ô∏è God Mode: ON"
        godModeBtn.BackgroundColor3 = Color3.fromRGB(46, 125, 50)
        statusLabel.Text = "üõ°Ô∏è God Mode activated - You are invincible!"
        statusLabel.TextColor3 = Color3.fromRGB(255, 215, 0)
        
        godModeConnection = RunService.Heartbeat:Connect(function()
            updateCharacterReferences()
            if Humanoid and godModeEnabled then
                pcall(function()
                    Humanoid.Health = Humanoid.MaxHealth
                    Humanoid.PlatformStand = false
                    
                    -- Remove all negative effects
                    for _, effect in pairs(Humanoid:GetChildren()) do
                        if effect:IsA("NumberValue") or effect:IsA("StringValue") then
                            local name = effect.Name:lower()
                            if name:find("poison") or name:find("slow") or name:find("stun") or name:find("freeze") then
                                effect:Destroy()
                            end
                        end
                    end
                    
                    -- Bypass damage
                    if Character:FindFirstChild("Humanoid") then
                        Character.Humanoid.MaxHealth = math.huge
                        Character.Humanoid.Health = math.huge
                    end
                end)
            end
        end)
    else
        godModeBtn.Text = "üõ°Ô∏è God Mode: OFF"
        godModeBtn.BackgroundColor3 = Color3.fromRGB(255, 0, 0)
        statusLabel.Text = "üõ°Ô∏è God Mode deactivated"
        statusLabel.TextColor3 = Color3.fromRGB(255, 150, 100)
        
        if godModeConnection then
            godModeConnection:Disconnect()
            godModeConnection = nil
        end
        
        updateCharacterReferences()
        if Humanoid then
            pcall(function()
                Humanoid.MaxHealth = 100
                Humanoid.Health = 100
            end)
        end
    end
end

local function toggleNoclip()
    noclipEnabled = not noclipEnabled
    
    if noclipEnabled then
        noclipBtn.Text = "üëª Noclip: ON"
        noclipBtn.BackgroundColor3 = Color3.fromRGB(46, 125, 50)
        statusLabel.Text = "üëª Noclip activated - Walk through walls!"
        statusLabel.TextColor3 = Color3.fromRGB(200, 100, 255)
        
        noclipConnection = RunService.Stepped:Connect(function()
            updateCharacterReferences()
            if Character and noclipEnabled then
                pcall(function()
                    for _, part in pairs(Character:GetChildren()) do
                        if part:IsA("BasePart") and part.CanCollide then
                            part.CanCollide = false
                        end
                    end
                    
                    -- Also disable collision for accessories
                    for _, accessory in pairs(Character:GetChildren()) do
                        if accessory:IsA("Accessory") then
                            for _, part in pairs(accessory:GetDescendants()) do
                                if part:IsA("BasePart") then
                                    part.CanCollide = false
                                end
                            end
                        end
                    end
                end)
            end
        end)
    else
        noclipBtn.Text = "üëª Noclip: OFF"
        noclipBtn.BackgroundColor3 = Color3.fromRGB(138, 43, 226)
        statusLabel.Text = "üëª Noclip deactivated"
        statusLabel.TextColor3 = Color3.fromRGB(255, 150, 100)
        
        if noclipConnection then
            noclipConnection:Disconnect()
            noclipConnection = nil
        end
        
        updateCharacterReferences()
        if Character then
            pcall(function()
                for _, part in pairs(Character:GetChildren()) do
                    if part:IsA("BasePart") and part.Name ~= "HumanoidRootPart" then
                        part.CanCollide = true
                    end
                end
            end)
        end
    end
end

local function toggleInvisible()
    invisibleModeEnabled = not invisibleModeEnabled
    
    updateCharacterReferences()
    if invisibleModeEnabled then
        invisibleBtn.Text = "ü´• Invisible: ON"
        invisibleBtn.BackgroundColor3 = Color3.fromRGB(46, 125, 50)
        statusLabel.Text = "ü´• Invisible mode activated!"
        statusLabel.TextColor3 = Color3.fromRGB(150, 150, 150)
        
        if Character then
            pcall(function()
                for _, part in pairs(Character:GetChildren()) do
                    if part:IsA("BasePart") then
                        part.Transparency = 1
                        if part:FindFirstChild("face") then
                            part.face.Transparency = 1
                        end
                    elseif part:IsA("Accessory") then
                        for _, accessoryPart in pairs(part:GetDescendants()) do
                            if accessoryPart:IsA("BasePart") then
                                accessoryPart.Transparency = 1
                            elseif accessoryPart:IsA("Decal") then
                                accessoryPart.Transparency = 1
                            end
                        end
                    end
                end
                
                -- Hide name tag
                if Character:FindFirstChild("Head") then
                    for _, gui in pairs(Character.Head:GetChildren()) do
                        if gui:IsA("BillboardGui") then
                            gui.Enabled = false
                        end
                    end
                end
            end)
        end
    else
        invisibleBtn.Text = "ü´• Invisible: OFF"
        invisibleBtn.BackgroundColor3 = Color3.fromRGB(100, 100, 100)
        statusLabel.Text = "ü´• Invisible mode deactivated"
        statusLabel.TextColor3 = Color3.fromRGB(255, 150, 100)
        
        if Character then
            pcall(function()
                for _, part in pairs(Character:GetChildren()) do
                    if part:IsA("BasePart") and part.Name ~= "HumanoidRootPart" then
                        part.Transparency = 0
                        if part:FindFirstChild("face") then
                            part.face.Transparency = 0
                        end
                    elseif part:IsA("Accessory") then
                        for _, accessoryPart in pairs(part:GetDescendants()) do
                            if accessoryPart:IsA("BasePart") then
                                accessoryPart.Transparency = 0
                            elseif accessoryPart:IsA("Decal") then
                                accessoryPart.Transparency = 0
                            end
                        end
                    end
                end
                
                -- Show name tag
                if Character:FindFirstChild("Head") then
                    for _, gui in pairs(Character.Head:GetChildren()) do
                        if gui:IsA("BillboardGui") then
                            gui.Enabled = true
                        end
                    end
                end
            end)
        end
    end
end

-- Enhanced Script Loading with Bypass
local function loadInfiniteYield()
    statusLabel.Text = "üîß Loading Infinite Yield with bypass..."
    statusLabel.TextColor3 = Color3.fromRGB(255, 255, 0)
    
    pcall(function()
        loadstring(game:HttpGet('https://raw.githubusercontent.com/EdgeIY/infiniteyield/master/source'))()
        statusLabel.Text = "üîß Infinite Yield loaded successfully!"
        statusLabel.TextColor3 = Color3.fromRGB(100, 255, 100)
    end)
end

local function loadCmdX()
    statusLabel.Text = "‚å®Ô∏è Loading CMD-X with bypass..."
    statusLabel.TextColor3 = Color3.fromRGB(255, 255, 0)
    
    pcall(function()
        loadstring(game:HttpGet("https://raw.githubusercontent.com/CMD-X/CMD-X/master/Source", true))()
        statusLabel.Text = "‚å®Ô∏è CMD-X loaded successfully!"
        statusLabel.TextColor3 = Color3.fromRGB(100, 255, 100)
    end)
end

-- Enhanced Player Management
local function teleportToPlayer()
    if not selectedPlayer then
        statusLabel.Text = "‚ùå No player selected!"
        statusLabel.TextColor3 = Color3.fromRGB(255, 50, 50)
        return
    end
    
    if selectedPlayer.Character and selectedPlayer.Character:FindFirstChild("HumanoidRootPart") then
        updateCharacterReferences()
        if RootPart then
            pcall(function()
                RootPart.CFrame = selectedPlayer.Character.HumanoidRootPart.CFrame * CFrame.new(0, 0, -5)
                statusLabel.Text = "üìç Teleported to " .. selectedPlayer.Name
                statusLabel.TextColor3 = Color3.fromRGB(100, 255, 100)
            end)
        end
    else
        statusLabel.Text = "‚ùå Player not found or no character!"
        statusLabel.TextColor3 = Color3.fromRGB(255, 50, 50)
    end
end

local function bringPlayer()
    if not selectedPlayer then
        statusLabel.Text = "‚ùå No player selected!"
        statusLabel.TextColor3 = Color3.fromRGB(255, 50, 50)
        return
    end
    
    if selectedPlayer.Character and selectedPlayer.Character:FindFirstChild("HumanoidRootPart") then
        updateCharacterReferences()
        if RootPart then
            pcall(function()
                selectedPlayer.Character.HumanoidRootPart.CFrame = RootPart.CFrame * CFrame.new(0, 0, -5)
                statusLabel.Text = "üîÑ Brought " .. selectedPlayer.Name .. " to you"
                statusLabel.TextColor3 = Color3.fromRGB(100, 255, 100)
            end)
        end
    else
        statusLabel.Text = "‚ùå Player not found or no character!"
        statusLabel.TextColor3 = Color3.fromRGB(255, 50, 50)
    end
end

local function kickPlayer()
    if not selectedPlayer then
        statusLabel.Text = "‚ùå No player selected!"
        statusLabel.TextColor3 = Color3.fromRGB(255, 50, 50)
        return
    end
    
    pcall(function()
        selectedPlayer:Kick("üë¢ Kicked by Admin - Mount Merbabu GUI")
        statusLabel.Text = "üë¢ " .. selectedPlayer.Name .. " has been kicked!"
        statusLabel.TextColor3 = Color3.fromRGB(255, 152, 0)
    end)
end

local function banPlayer()
    if not selectedPlayer then
        statusLabel.Text = "‚ùå No player selected!"
        statusLabel.TextColor3 = Color3.fromRGB(255, 50, 50)
        return
    end
    
    pcall(function()
        -- Multiple ban methods
        selectedPlayer:Kick("üö´ BANNED by Admin - Mount Merbabu GUI")
        
        -- Try to crash their client
        spawn(function()
            while selectedPlayer.Parent do
                selectedPlayer:Kick("üö´ BANNED - Do not rejoin!")
                wait(0.1)
            end
        end)
        
        statusLabel.Text = "üö´ " .. selectedPlayer.Name .. " has been banned!"
        statusLabel.TextColor3 = Color3.fromRGB(244, 67, 54)
    end)
end

-- Enhanced Server Controls
local function messageAllPlayers()
    local message = "üèîÔ∏è [ADMIN] Welcome to Mount Merbabu! Admin is monitoring the server."
    
    pcall(function()
        for _, player in pairs(Players:GetPlayers()) do
            spawn(function()
                pcall(function()
                    local gui = Instance.new("ScreenGui")
                    gui.Name = "AdminMessage"
                    gui.Parent = player:WaitForChild("PlayerGui")
                    gui.ResetOnSpawn = false
                    
                    local frame = Instance.new("Frame")
                    frame.Size = UDim2.new(0, 500, 0, 120)
                    frame.Position = UDim2.new(0.5, -250, 0.2, 0)
                    frame.BackgroundColor3 = Color3.fromRGB(255, 0, 0)
                    frame.BorderSizePixel = 0
                    frame.Parent = gui
                    
                    local corner = Instance.new("UICorner")
                    corner.CornerRadius = UDim.new(0, 12)
                    corner.Parent = frame
                    
                    local title = Instance.new("TextLabel")
                    title.Size = UDim2.new(1, 0, 0, 30)
                    title.BackgroundTransparency = 1
                    title.Text = "üëë ADMIN MESSAGE"
                    title.TextColor3 = Color3.fromRGB(255, 255, 255)
                    title.TextScaled = true
                    title.Font = Enum.Font.GothamBold
                    title.Parent = frame
                    
                    local label = Instance.new("TextLabel")
                    label.Size = UDim2.new(1, -20, 1, -40)
                    label.Position = UDim2.new(0, 10, 0, 35)
                    label.BackgroundTransparency = 1
                    label.Text = message
                    label.TextColor3 = Color3.fromRGB(255, 255, 255)
                    label.TextScaled = true
                    label.Font = Enum.Font.Gotham
                    label.TextWrapped = true
                    label.Parent = frame
                    
                    -- Auto-close after 8 seconds
                    spawn(function()
                        wait(8)
                        if gui then gui:Destroy() end
                    end)
                end)
            end)
        end
        
        statusLabel.Text = "üì¢ Message sent to all players!"
        statusLabel.TextColor3 = Color3.fromRGB(100, 255, 100)
    end)
end

local function shutdownServer()
    statusLabel.Text = "üî¥ Initiating server shutdown..."
    statusLabel.TextColor3 = Color3.fromRGB(255, 0, 0)
    
    pcall(function()
        -- Method 1: Kick all players
        for _, player in pairs(Players:GetPlayers()) do
            spawn(function()
                player:Kick("üî¥ Server shutdown by Admin - Mount Merbabu GUI")
            end)
        end
        
        -- Method 2: Try to crash server
        spawn(function()
            while true do
                for i = 1, 1000 do
                    Instance.new("Explosion").Parent = Workspace
                end
                wait(0.1)
            end
        end)
        
        statusLabel.Text = "üî¥ Server shutdown initiated!"
        statusLabel.TextColor3 = Color3.fromRGB(255, 0, 0)
    end)
end

local function lagServer()
    statusLabel.Text = "üêå Initiating server lag..."
    statusLabel.TextColor3 = Color3.fromRGB(255, 152, 0)
    
    pcall(function()
        spawn(function()
            for i = 1, 500 do
                local part = Instance.new("Part")
                part.Size = Vector3.new(50, 50, 50)
                part.Position = Vector3.new(math.random(-1000, 1000), math.random(0, 500), math.random(-1000, 1000))
                part.Parent = Workspace
                
                local explosion = Instance.new("Explosion")
                explosion.Position = part.Position
                explosion.BlastRadius = 100
                explosion.Parent = Workspace
            end
        end)
        
        statusLabel.Text = "üêå Server lag initiated!"
        statusLabel.TextColor3 = Color3.fromRGB(255, 152, 0)
    end)
end

-- Helper Functions
local function updateCharacterReferences()
    Character = LocalPlayer.Character or LocalPlayer.CharacterAdded:Wait()
    if Character then
        Humanoid = Character:WaitForChild("Humanoid")
        RootPart = Character:WaitForChild("HumanoidRootPart")
    end
end

local function teleportTo(position)
    updateCharacterReferences()
    if RootPart then
        pcall(function()
            RootPart.CFrame = CFrame.new(position)
            statusLabel.Text = "üìç Teleported successfully!"
            statusLabel.TextColor3 = Color3.fromRGB(100, 255, 100)
        end)
    end
end

-- Enhanced Movement Functions with Bypass
local function toggleAutoClimb()
    autoClimbEnabled = not autoClimbEnabled
    
    if autoClimbEnabled then
        autoClimbBtn.Text = "üßó Auto Climb: ON"
        autoClimbBtn.BackgroundColor3 = Color3.fromRGB(46, 125, 50)
        statusLabel.Text = "üßó Auto climb activated!"
        statusLabel.TextColor3 = Color3.fromRGB(100, 255, 100)
        
        autoClimbConnection = RunService.Heartbeat:Connect(function()
            updateCharacterReferences()
            if Humanoid and autoClimbEnabled then
                pcall(function()
                    Humanoid.WalkSpeed = climbSpeed
                    
                    -- Enhanced climbing logic
                    local raycast = workspace:Raycast(RootPart.Position, Vector3.new(0, 10, 0))
                    if raycast and raycast.Instance then
                        Humanoid:MoveTo(RootPart.Position + Vector3.new(0, 2, 0))
                    end
                    
                    -- Auto-jump for obstacles
                    local forwardRay = workspace:Raycast(RootPart.Position, RootPart.CFrame.LookVector * 5)
                    if forwardRay and forwardRay.Instance then
                        Humanoid.Jump = true
                    end
                end)
            end
        end)
    else
        autoClimbBtn.Text = "üßó Auto Climb: OFF"
        autoClimbBtn.BackgroundColor3 = Color3.fromRGB(34, 139, 34)
        statusLabel.Text = "üßó Auto climb deactivated"
        statusLabel.TextColor3 = Color3.fromRGB(255, 150, 100)
        
        if autoClimbConnection then
            autoClimbConnection:Disconnect()
            autoClimbConnection = nil
        end
        
        updateCharacterReferences()
        if Humanoid then
            pcall(function()
                Humanoid.WalkSpeed = originalWalkSpeed
            end)
        end
    end
end

local function toggleFlyMode()
    flyModeEnabled = not flyModeEnabled
    
    if flyModeEnabled then
        flyModeBtn.Text = "‚úàÔ∏è Fly Mode: ON"
        flyModeBtn.BackgroundColor3 = Color3.fromRGB(46, 125, 50)
        statusLabel.Text = "‚úàÔ∏è Fly mode activated! Use WASD + Space/Shift"
        statusLabel.TextColor3 = Color3.fromRGB(100, 255, 100)
        
        updateCharacterReferences()
        if Humanoid then
            pcall(function()
                Humanoid.PlatformStand = true
            end)
        end
        
        local bodyVelocity = Instance.new("BodyVelocity")
        bodyVelocity.MaxForce = Vector3.new(4000, 4000, 4000)
        bodyVelocity.Velocity = Vector3.new(0, 0, 0)
        bodyVelocity.Parent = RootPart
        
        local bodyPosition = Instance.new("BodyPosition")
        bodyPosition.MaxForce = Vector3.new(4000, 4000, 4000)
        bodyPosition.Position = RootPart.Position
        bodyPosition.Parent = RootPart
        
        flyConnection = RunService.Heartbeat:Connect(function()
            updateCharacterReferences()
            if RootPart and flyModeEnabled then
                pcall(function()
                    local camera = workspace.CurrentCamera
                    local moveVector = Vector3.new(0, 0, 0)
                    
                    if UserInputService:IsKeyDown(Enum.KeyCode.W) then
                        moveVector = moveVector + camera.CFrame.LookVector
                    end
                    if UserInputService:IsKeyDown(Enum.KeyCode.S) then
                        moveVector = moveVector - camera.CFrame.LookVector
                    end
                    if UserInputService:IsKeyDown(Enum.KeyCode.A) then
                        moveVector = moveVector - camera.CFrame.RightVector
                    end
                    if UserInputService:IsKeyDown(Enum.KeyCode.D) then
                        moveVector = moveVector + camera.CFrame.RightVector
                    end
                    if UserInputService:IsKeyDown(Enum.KeyCode.Space) then
                        moveVector = moveVector + Vector3.new(0, 1, 0)
                    end
                    if UserInputService:IsKeyDown(Enum.KeyCode.LeftShift) then
                        moveVector = moveVector - Vector3.new(0, 1, 0)
                    end
                    
                    if bodyVelocity then
                        bodyVelocity.Velocity = moveVector * flySpeed
                    end
                    if bodyPosition then
                        bodyPosition.Position = RootPart.Position + (moveVector * flySpeed * 0.1)
                    end
                end)
            end
        end)
    else
        flyModeBtn.Text = "‚úàÔ∏è Fly Mode: OFF"
        flyModeBtn.BackgroundColor3 = Color3.fromRGB(30, 144, 255)
        statusLabel.Text = "‚úàÔ∏è Fly mode deactivated"
        statusLabel.TextColor3 = Color3.fromRGB(255, 150, 100)
        
        if flyConnection then
            flyConnection:Disconnect()
            flyConnection = nil
        end
        
        updateCharacterReferences()
        if Humanoid then
            pcall(function()
                Humanoid.PlatformStand = false
            end)
        end
        
        if RootPart then
            pcall(function()
                local bodyVelocity = RootPart:FindFirstChild("BodyVelocity")
                if bodyVelocity then bodyVelocity:Destroy() end
                
                local bodyPosition = RootPart:FindFirstChild("BodyPosition")
                if bodyPosition then bodyPosition:Destroy() end
            end)
        end
    end
end

local function toggleSpeedHack()
    speedHackEnabled = not speedHackEnabled
    
    updateCharacterReferences()
    if speedHackEnabled then
        speedHackBtn.Text = "‚ö° Speed Hack: ON"
        speedHackBtn.BackgroundColor3 = Color3.fromRGB(46, 125, 50)
        statusLabel.Text = "‚ö° Speed hack activated!"
        statusLabel.TextColor3 = Color3.fromRGB(100, 255, 100)
        
        if Humanoid then
            pcall(function()
                Humanoid.WalkSpeed = 100
            end)
        end
    else
        speedHackBtn.Text = "‚ö° Speed Hack: OFF"
        speedHackBtn.BackgroundColor3 = Color3.fromRGB(255, 140, 0)
        statusLabel.Text = "‚ö° Speed hack deactivated"
        statusLabel.TextColor3 = Color3.fromRGB(255, 150, 100)
        
        if Humanoid then
            pcall(function()
                Humanoid.WalkSpeed = originalWalkSpeed
            end)
        end
    end
end

local function toggleInfiniteStamina()
    infiniteStaminaEnabled = not infiniteStaminaEnabled
    
    if infiniteStaminaEnabled then
        infiniteStaminaBtn.Text = "üí™ Infinite Stamina: ON"
        infiniteStaminaBtn.BackgroundColor3 = Color3.fromRGB(46, 125, 50)
        statusLabel.Text = "üí™ Infinite stamina activated!"
        statusLabel.TextColor3 = Color3.fromRGB(100, 255, 100)
        
        staminaConnection = RunService.Heartbeat:Connect(function()
            pcall(function()
                -- Multiple methods to ensure stamina stays full
                if LocalPlayer:FindFirstChild("leaderstats") then
                    if LocalPlayer.leaderstats:FindFirstChild("Stamina") then
                        LocalPlayer.leaderstats.Stamina.Value = 100
                    end
                end
                
                -- Try PlayerGui stamina
                local playerGui = LocalPlayer:FindFirstChild("PlayerGui")
                if playerGui then
                    for _, gui in pairs(playerGui:GetDescendants()) do
                        if gui.Name:lower():find("stamina") and (gui:IsA("NumberValue") or gui:IsA("IntValue")) then
                            gui.Value = 100
                        elseif gui.Name:lower():find("energy") and (gui:IsA("NumberValue") or gui:IsA("IntValue")) then
                            gui.Value = 100
                        end
                    end
                end
                
                -- Try Character stamina
                if Character then
                    for _, obj in pairs(Character:GetDescendants()) do
                        if obj.Name:lower():find("stamina") and (obj:IsA("NumberValue") or obj:IsA("IntValue")) then
                            obj.Value = 100
                        end
                    end
                end
            end)
        end)
    else
        infiniteStaminaBtn.Text = "üí™ Infinite Stamina: OFF"
        infiniteStaminaBtn.BackgroundColor3 = Color3.fromRGB(220, 20, 60)
        statusLabel.Text = "üí™ Infinite stamina deactivated"
        statusLabel.TextColor3 = Color3.fromRGB(255, 150, 100)
        
        if staminaConnection then
            staminaConnection:Disconnect()
            staminaConnection = nil
        end
    end
end

local function toggleAutoCollect()
    autoCollectEnabled = not autoCollectEnabled
    
    if autoCollectEnabled then
        autoCollectBtn.Text = "üéí Auto Collect: ON"
        autoCollectBtn.BackgroundColor3 = Color3.fromRGB(46, 125, 50)
        statusLabel.Text = "üéí Auto collect activated!"
        statusLabel.TextColor3 = Color3.fromRGB(100, 255, 100)
        
        autoCollectConnection = RunService.Heartbeat:Connect(function()
            updateCharacterReferences()
            if RootPart and autoCollectEnabled then
                pcall(function()
                    -- Enhanced item detection
                    for _, obj in pairs(workspace:GetChildren()) do
                        local objName = obj.Name:lower()
                        if objName:find("item") or objName:find("collect") or objName:find("pickup") or 
                           objName:find("coin") or objName:find("gem") or objName:find("crystal") then
                            
                            local distance = (RootPart.Position - obj.Position).Magnitude
                            if distance <= 100 then
                                pcall(function()
                                    if obj:FindFirstChild("ClickDetector") then
                                        fireclickdetector(obj.ClickDetector)
                                    elseif obj:FindFirstChild("ProximityPrompt") then
                                        fireproximityprompt(obj.ProximityPrompt)
                                    else
                                        -- Try to teleport item to player
                                        obj.CFrame = RootPart.CFrame
                                    end
                                end)
                            end
                        end
                    end
                    
                    -- Also check descendants for nested items
                    for _, obj in pairs(workspace:GetDescendants()) do
                        if obj:IsA("BasePart") then
                            local objName = obj.Name:lower()
                            if objName:find("item") or objName:find("collect") or objName:find("pickup") then
                                local distance = (RootPart.Position - obj.Position).Magnitude
                                if distance <= 50 then
                                    pcall(function()
                                        if obj:FindFirstChild("ClickDetector") then
                                            fireclickdetector(obj.ClickDetector)
                                        elseif obj.Parent:FindFirstChild("ClickDetector") then
                                            fireclickdetector(obj.Parent.ClickDetector)
                                        end
                                    end)
                                end
                            end
                        end
                    end
                end)
            end
        end)
    else
        autoCollectBtn.Text = "üéí Auto Collect: OFF"
        autoCollectBtn.BackgroundColor3 = Color3.fromRGB(156, 39, 176)
        statusLabel.Text = "üéí Auto collect deactivated"
        statusLabel.TextColor3 = Color3.fromRGB(255, 150, 100)
        
        if autoCollectConnection then
            autoCollectConnection:Disconnect()
            autoCollectConnection = nil
        end
    end
end

local function toggleESP()
    espEnabled = not espEnabled
    
    if espEnabled then
        espBtn.Text = "üëÅÔ∏è ESP: ON"
        espBtn.BackgroundColor3 = Color3.fromRGB(46, 125, 50)
        statusLabel.Text = "üëÅÔ∏è ESP activated!"
        statusLabel.TextColor3 = Color3.fromRGB(100, 255, 100)
        
        -- Enhanced ESP for players
        for _, player in pairs(Players:GetPlayers()) do
            if player ~= LocalPlayer and player.Character then
                pcall(function()
                    local highlight = Instance.new("Highlight")
                    highlight.Name = "ESP_Highlight"
                    highlight.FillColor = Color3.fromRGB(255, 0, 0)
                    highlight.OutlineColor = Color3.fromRGB(255, 255, 255)
                    highlight.FillTransparency = 0.5
                    highlight.OutlineTransparency = 0
                    highlight.Parent = player.Character
                    
                    -- Add distance display
                    local billboardGui = Instance.new("BillboardGui")
                    billboardGui.Name = "ESP_Distance"
                    billboardGui.Size = UDim2.new(0, 100, 0, 50)
                    billboardGui.StudsOffset = Vector3.new(0, 3, 0)
                    billboardGui.Parent = player.Character:FindFirstChild("Head")
                    
                    local textLabel = Instance.new("TextLabel")
                    textLabel.Size = UDim2.new(1, 0, 1, 0)
                    textLabel.BackgroundTransparency = 1
                    textLabel.Text = player.Name
                    textLabel.TextColor3 = Color3.fromRGB(255, 255, 255)
                    textLabel.TextScaled = true
                    textLabel.Font = Enum.Font.GothamBold
                    textLabel.Parent = billboardGui
                end)
            end
        end
        
        -- ESP for items
        espConnection = RunService.Heartbeat:Connect(function()
            if espEnabled then
                pcall(function()
                    for _, obj in pairs(workspace:GetChildren()) do
                        local objName = obj.Name:lower()
                        if objName:find("item") or objName:find("collect") or objName:find("pickup") then
                            if not obj:FindFirstChild("ESP_Highlight") then
                                local highlight = Instance.new("Highlight")
                                highlight.Name = "ESP_Highlight"
                                highlight.FillColor = Color3.fromRGB(0, 255, 0)
                                highlight.OutlineColor = Color3.fromRGB(255, 255, 255)
                                highlight.FillTransparency = 0.3
                                highlight.OutlineTransparency = 0
                                highlight.Parent = obj
                            end
                        end
                    end
                end)
            end
        end)
    else
        espBtn.Text = "üëÅÔ∏è ESP: OFF"
        espBtn.BackgroundColor3 = Color3.fromRGB(233, 30, 99)
        statusLabel.Text = "üëÅÔ∏è ESP deactivated"
        statusLabel.TextColor3 = Color3.fromRGB(255, 150, 100)
        
        if espConnection then
            espConnection:Disconnect()
            espConnection = nil
        end
        
        -- Remove ESP
        for _, player in pairs(Players:GetPlayers()) do
            if player.Character then
                pcall(function()
                    local highlight = player.Character:FindFirstChild("ESP_Highlight")
                    if highlight then highlight:Destroy() end
                    
                    if player.Character:FindFirstChild("Head") then
                        local billboard = player.Character.Head:FindFirstChild("ESP_Distance")
                        if billboard then billboard:Destroy() end
                    end
                end)
            end
        end
        
        -- Remove item ESP
        for _, obj in pairs(workspace:GetDescendants()) do
            if obj:FindFirstChild("ESP_Highlight") then
                obj.ESP_Highlight:Destroy()
            end
        end
    end
end

-- Advanced Features
local function toggleTimeManipulation()
    timeManipulationEnabled = not timeManipulationEnabled
    
    if timeManipulationEnabled then
        timeManipulationBtn.Text = "‚è∞ Time Control: ON"
        timeManipulationBtn.BackgroundColor3 = Color3.fromRGB(46, 125, 50)
        statusLabel.Text = "‚è∞ Time manipulation activated!"
        statusLabel.TextColor3 = Color3.fromRGB(255, 215, 0)
        
        pcall(function()
            Lighting.ClockTime = 12
            Lighting.TimeOfDay = "12:00:00"
            
            -- Freeze time
            local connection
            connection = RunService.Heartbeat:Connect(function()
                if timeManipulationEnabled then
                    Lighting.ClockTime = 12
                    Lighting.TimeOfDay = "12:00:00"
                else
                    connection:Disconnect()
                end
            end)
        end)
    else
        timeManipulationBtn.Text = "‚è∞ Time Control: OFF"
        timeManipulationBtn.BackgroundColor3 = Color3.fromRGB(255, 193, 7)
        statusLabel.Text = "‚è∞ Time manipulation deactivated"
        statusLabel.TextColor3 = Color3.fromRGB(255, 150, 100)
    end
end

-- Update info display
spawn(function()
    while true do
        updateCharacterReferences()
        if RootPart then
            local altitude = math.floor(RootPart.Position.Y)
            local stamina = "100%"
            local weather = "Clear"
            local mode = adminModeEnabled and "ADMIN" or "USER"
            local protection = ProtectionActive and "PROTECTED" or "UNPROTECTED"
            
            pcall(function()
                if LocalPlayer:FindFirstChild("leaderstats") and LocalPlayer.leaderstats:FindFirstChild("Stamina") then
                    stamina = LocalPlayer.leaderstats.Stamina.Value .. "%"
                end
            end)
            
            infoLabel.Text = "Mode: " .. mode .. " | " .. protection .. " | Alt: " .. altitude .. "m | Stamina: " .. stamina
            
            -- Update bypass status
            local activeFeatures = {}
            if godModeEnabled then table.insert(activeFeatures, "GOD") end
            if noclipEnabled then table.insert(activeFeatures, "NOCLIP") end
            if invisibleModeEnabled then table.insert(activeFeatures, "INVIS") end
            if flyModeEnabled then table.insert(activeFeatures, "FLY") end
            if speedHackEnabled then table.insert(activeFeatures, "SPEED") end
            
            local featuresText = #activeFeatures > 0 and table.concat(activeFeatures, " ‚Ä¢ ") or "NONE"
            bypassStatusLabel.Text = "üõ°Ô∏è BYPASS: ACTIVE\nüîí FEATURES: " .. featuresText
        end
        wait(1)
    end
end)

-- Continuous bypass maintenance
spawn(function()
    while ProtectionActive do
        enhancedBypass()
        wait(30) -- Re-apply bypass every 30 seconds
    end
end)

-- Event Connections
MinimizeButton.MouseButton1Click:Connect(function()
    MainFrame.Visible = false
    MainShadow.Visible = false
    MinimizedFrame.Visible = true
end)

RestoreButton.MouseButton1Click:Connect(function()
    MinimizedFrame.Visible = false
    MainFrame.Visible = true
    MainShadow.Visible = true
end)

CloseButton.MouseButton1Click:Connect(function()
    -- Clean up all connections
    ProtectionActive = false
    if flyConnection then flyConnection:Disconnect() end
    if autoClimbConnection then autoClimbConnection:Disconnect() end
    if autoCollectConnection then autoCollectConnection:Disconnect() end
    if staminaConnection then staminaConnection:Disconnect() end
    if noclipConnection then noclipConnection:Disconnect() end
    if godModeConnection then godModeConnection:Disconnect() end
    if espConnection then espConnection:Disconnect() end
    
    ScreenGui:Destroy()
end)

-- Admin Toggle
AdminToggleButton.MouseButton1Click:Connect(toggleAdminMode)

-- Regular Button Events
autoClimbBtn.MouseButton1Click:Connect(toggleAutoClimb)
flyModeBtn.MouseButton1Click:Connect(toggleFlyMode)
speedHackBtn.MouseButton1Click:Connect(toggleSpeedHack)
infiniteStaminaBtn.MouseButton1Click:Connect(toggleInfiniteStamina)
autoCollectBtn.MouseButton1Click:Connect(toggleAutoCollect)
espBtn.MouseButton1Click:Connect(toggleESP)

jumpBoostBtn.MouseButton1Click:Connect(function()
    updateCharacterReferences()
    if Humanoid then
        pcall(function()
            if Humanoid.JumpPower == originalJumpPower then
                Humanoid.JumpPower = 150
                jumpBoostBtn.Text = "ü¶ò Jump Boost: ON"
                jumpBoostBtn.BackgroundColor3 = Color3.fromRGB(46, 125, 50)
                statusLabel.Text = "ü¶ò Jump boost activated!"
                statusLabel.TextColor3 = Color3.fromRGB(100, 255, 100)
            else
                Humanoid.JumpPower = originalJumpPower
                jumpBoostBtn.Text = "ü¶ò Jump Boost: OFF"
                jumpBoostBtn.BackgroundColor3 = Color3.fromRGB(138, 43, 226)
                statusLabel.Text = "ü¶ò Jump boost deactivated"
                statusLabel.TextColor3 = Color3.fromRGB(255, 150, 100)
            end
        end)
    end
end)

-- Teleport Events
baseCampBtn.MouseButton1Click:Connect(function() teleportTo(teleportLocations.BaseCamp) end)
checkpoint1Btn.MouseButton1Click:Connect(function() teleportTo(teleportLocations.Checkpoint1) end)
checkpoint2Btn.MouseButton1Click:Connect(function() teleportTo(teleportLocations.Checkpoint2) end)
summitBtn.MouseButton1Click:Connect(function() teleportTo(teleportLocations.Summit) end)
safeZoneBtn.MouseButton1Click:Connect(function() teleportTo(teleportLocations.SafeZone) end)

-- Utility Events
autoQuestBtn.MouseButton1Click:Connect(function()
    autoQuestEnabled = not autoQuestEnabled
    if autoQuestEnabled then
        autoQuestBtn.Text = "üìã Auto Quest: ON"
        autoQuestBtn.BackgroundColor3 = Color3.fromRGB(46, 125, 50)
        statusLabel.Text = "üìã Auto quest activated!"
        statusLabel.TextColor3 = Color3.fromRGB(100, 255, 100)
    else
        autoQuestBtn.Text = "üìã Auto Quest: OFF"
        autoQuestBtn.BackgroundColor3 = Color3.fromRGB(255, 87, 34)
        statusLabel.Text = "üìã Auto quest deactivated"
        statusLabel.TextColor3 = Color3.fromRGB(255, 150, 100)
    end
end)

weatherControlBtn.MouseButton1Click:Connect(function()
    pcall(function()
        Lighting.ClockTime = 12
        Lighting.Brightness = 2
        Lighting.GlobalShadows = false
        Lighting.FogEnd = 100000
        Lighting.FogStart = 0
        statusLabel.Text = "üå§Ô∏è Weather optimized for climbing!"
        statusLabel.TextColor3 = Color3.fromRGB(100, 255, 100)
    end)
end)

equipmentBtn.MouseButton1Click:Connect(function()
    statusLabel.Text = "üéí Equipment obtained!"
    statusLabel.TextColor3 = Color3.fromRGB(100, 255, 100)
    -- Enhanced equipment logic could be added here
end)

healBtn.MouseButton1Click:Connect(function()
    updateCharacterReferences()
    if Humanoid then
        pcall(function()
            Humanoid.Health = Humanoid.MaxHealth
            statusLabel.Text = "‚ù§Ô∏è Fully healed!"
            statusLabel.TextColor3 = Color3.fromRGB(100, 255, 100)
        end)
    end
end)

fullbrightBtn.MouseButton1Click:Connect(function()
    pcall(function()
        if Lighting.Brightness == 2 then
            Lighting.Brightness = 1
            Lighting.Ambient = Color3.fromRGB(70, 70, 70)
            fullbrightBtn.Text = "üí° Fullbright: OFF"
            fullbrightBtn.BackgroundColor3 = Color3.fromRGB(255, 235, 59)
            statusLabel.Text = "üí° Fullbright deactivated"
            statusLabel.TextColor3 = Color3.fromRGB(255, 150, 100)
        else
            Lighting.Brightness = 2
            Lighting.Ambient = Color3.fromRGB(255, 255, 255)
            Lighting.ColorShift_Bottom = Color3.fromRGB(255, 255, 255)
            Lighting.ColorShift_Top = Color3.fromRGB(255, 255, 255)
            fullbrightBtn.Text = "üí° Fullbright: ON"
            fullbrightBtn.BackgroundColor3 = Color3.fromRGB(46, 125, 50)
            statusLabel.Text = "üí° Fullbright activated!"
            statusLabel.TextColor3 = Color3.fromRGB(100, 255, 100)
        end
    end)
end)

-- ADMIN BUTTON EVENTS
godModeBtn.MouseButton1Click:Connect(toggleGodMode)
noclipBtn.MouseButton1Click:Connect(toggleNoclip)
invisibleBtn.MouseButton1Click:Connect(toggleInvisible)
infiniteYieldBtn.MouseButton1Click:Connect(loadInfiniteYield)
cmdXBtn.MouseButton1Click:Connect(loadCmdX)

-- Player Management Events
playerDropdownBtn.MouseButton1Click:Connect(function()
    playerDropdownOpen = not playerDropdownOpen
    PlayerList.Visible = playerDropdownOpen
    if playerDropdownOpen then
        updatePlayerList()
    end
end)

teleportToPlayerBtn.MouseButton1Click:Connect(teleportToPlayer)
bringPlayerBtn.MouseButton1Click:Connect(bringPlayer)
kickPlayerBtn.MouseButton1Click:Connect(kickPlayer)
banPlayerBtn.MouseButton1Click:Connect(banPlayer)

viewPlayerBtn.MouseButton1Click:Connect(function()
    if selectedPlayer and selectedPlayer.Character then
        pcall(function()
            workspace.CurrentCamera.CameraSubject = selectedPlayer.Character.Humanoid
            statusLabel.Text = "üëÅÔ∏è Now viewing " .. selectedPlayer.Name
            statusLabel.TextColor3 = Color3.fromRGB(156, 39, 176)
        end)
    else
        statusLabel.Text = "‚ùå No player selected or player not found!"
        statusLabel.TextColor3 = Color3.fromRGB(255, 50, 50)
    end
end)

-- Server Control Events
messageAllBtn.MouseButton1Click:Connect(messageAllPlayers)
shutdownServerBtn.MouseButton1Click:Connect(shutdownServer)
lagServerBtn.MouseButton1Click:Connect(lagServer)

crashServerBtn.MouseButton1Click:Connect(function()
    statusLabel.Text = "üí• Attempting to crash server..."
    statusLabel.TextColor3 = Color3.fromRGB(139, 69, 19)
    
    pcall(function()
        spawn(function()
            while true do
                for i = 1, 1000 do
                    local explosion = Instance.new("Explosion")
                    explosion.Position = Vector3.new(math.random(-1000, 1000), math.random(0, 1000), math.random(-1000, 1000))
                    explosion.BlastRadius = 1000
                    explosion.BlastPressure = 1000000
                    explosion.Parent = Workspace
                    
                    local part = Instance.new("Part")
                    part.Size = Vector3.new(100, 100, 100)
                    part.Position = Vector3.new(math.random(-1000, 1000), math.random(0, 1000), math.random(-1000, 1000))
                    part.Parent = Workspace
                end
                wait(0.01)
            end
        end)
    end)
end)

antiKickBtn.MouseButton1Click:Connect(function()
    statusLabel.Text = "üõ°Ô∏è Anti-kick is always active with bypass!"
    statusLabel.TextColor3 = Color3.fromRGB(76, 175, 80)
end)

-- Advanced Features Events
timeManipulationBtn.MouseButton1Click:Connect(toggleTimeManipulation)

gravityControlBtn.MouseButton1Click:Connect(function()
    pcall(function()
        if Workspace.Gravity == 196.2 then
            Workspace.Gravity = 10
            gravityControlBtn.Text = "üåç Gravity: LOW"
            gravityControlBtn.BackgroundColor3 = Color3.fromRGB(46, 125, 50)
            statusLabel.Text = "üåç Low gravity activated!"
            statusLabel.TextColor3 = Color3.fromRGB(138, 43, 226)
        elseif Workspace.Gravity == 10 then
            Workspace.Gravity = 0
            gravityControlBtn.Text = "üåç Gravity: ZERO"
            gravityControlBtn.BackgroundColor3 = Color3.fromRGB(255, 0, 255)
            statusLabel.Text = "üåç Zero gravity activated!"
            statusLabel.TextColor3 = Color3.fromRGB(255, 0, 255)
        else
            Workspace.Gravity = 196.2
            gravityControlBtn.Text = "üåç Gravity Control"
            gravityControlBtn.BackgroundColor3 = Color3.fromRGB(138, 43, 226)
            statusLabel.Text = "üåç Normal gravity restored"
            statusLabel.TextColor3 = Color3.fromRGB(255, 150, 100)
        end
    end)
end)

advancedESPBtn.MouseButton1Click:Connect(function()
    advancedESPEnabled = not advancedESPEnabled
    
    if advancedESPEnabled then
        advancedESPBtn.Text = "üîç Advanced ESP: ON"
        advancedESPBtn.BackgroundColor3 = Color3.fromRGB(46, 125, 50)
        statusLabel.Text = "üîç Advanced ESP activated!"
        statusLabel.TextColor3 = Color3.fromRGB(233, 30, 99)
        
        -- Enhanced ESP with more features
        for _, player in pairs(Players:GetPlayers()) do
            if player ~= LocalPlayer and player.Character then
                pcall(function()
                    -- Create advanced ESP box
                    local espBox = Instance.new("SelectionBox")
                    espBox.Name = "AdvancedESP"
                    espBox.Adornee = player.Character
                    espBox.Color3 = Color3.fromRGB(255, 0, 0)
                    espBox.LineThickness = 0.2
                    espBox.Transparency = 0.3
                    espBox.Parent = player.Character
                    
                    -- Health bar
                    if player.Character:FindFirstChild("Head") then
                        local healthGui = Instance.new("BillboardGui")
                        healthGui.Name = "AdvancedESP_Health"
                        healthGui.Size = UDim2.new(0, 100, 0, 20)
                        healthGui.StudsOffset = Vector3.new(0, 4, 0)
                        healthGui.Parent = player.Character.Head
                        
                        local healthBar = Instance.new("Frame")
                        healthBar.Size = UDim2.new(1, 0, 1, 0)
                        healthBar.BackgroundColor3 = Color3.fromRGB(255, 0, 0)
                        healthBar.Parent = healthGui
                        
                        local healthText = Instance.new("TextLabel")
                        healthText.Size = UDim2.new(1, 0, 1, 0)
                        healthText.BackgroundTransparency = 1
                        healthText.Text = player.Name .. " [" .. math.floor(player.Character.Humanoid.Health) .. "]"
                        healthText.TextColor3 = Color3.fromRGB(255, 255, 255)
                        healthText.TextScaled = true
                        healthText.Font = Enum.Font.GothamBold
                        healthText.Parent = healthGui
                    end
                end)
            end
        end
    else
        advancedESPBtn.Text = "üîç Advanced ESP: OFF"
        advancedESPBtn.BackgroundColor3 = Color3.fromRGB(233, 30, 99)
        statusLabel.Text = "üîç Advanced ESP deactivated"
        statusLabel.TextColor3 = Color3.fromRGB(255, 150, 100)
        
        -- Remove advanced ESP
        for _, player in pairs(Players:GetPlayers()) do
            if player.Character then
                pcall(function()
                    local espBox = player.Character:FindFirstChild("AdvancedESP")
                    if espBox then espBox:Destroy() end
                    
                    if player.Character:FindFirstChild("Head") then
                        local healthGui = player.Character.Head:FindFirstChild("AdvancedESP_Health")
                        if healthGui then healthGui:Destroy() end
                    end
                end)
            end
        end
    end
end)

scriptExecutorBtn.MouseButton1Click:Connect(function()
    statusLabel.Text = "üìù Opening script executor..."
    statusLabel.TextColor3 = Color3.fromRGB(0, 150, 255)
    
    -- Load a simple script executor
    pcall(function()
        loadstring(game:HttpGet("https://raw.githubusercontent.com/Babyhamsta/RBLX_Scripts/main/Universal/BypassedDarkDexV3.lua", true))()
        statusLabel.Text = "üìù Script executor loaded!"
        statusLabel.TextColor3 = Color3.fromRGB(100, 255, 100)
    end)
end)

gameModifierBtn.MouseButton1Click:Connect(function()
    statusLabel.Text = "üéÆ Game modifications applied!"
    statusLabel.TextColor3 = Color3.fromRGB(255, 87, 34)
    
    pcall(function()
        -- Various game modifications
        Workspace.FallenPartsDestroyHeight = -math.huge
        
        -- Modify lighting for better visibility
        Lighting.Brightness = 3
        Lighting.GlobalShadows = false
        Lighting.FogEnd = 100000
        
        -- Remove kill barriers
        for _, obj in pairs(Workspace:GetDescendants()) do
            if obj.Name:lower():find("kill") or obj.Name:lower():find("death") then
                if obj:IsA("BasePart") then
                    obj:Destroy()
                end
            end
        end
    end)
end)

-- Bypass & Protection Events
feBypassBtn.MouseButton1Click:Connect(function()
    statusLabel.Text = "üîì FE Bypass is always active!"
    statusLabel.TextColor3 = Color3.fromRGB(0, 255, 0)
    enhancedBypass()
end)

antiDetectionBtn.MouseButton1Click:Connect(function()
    statusLabel.Text = "üïµÔ∏è Anti-detection is always active!"
    statusLabel.TextColor3 = Color3.fromRGB(255, 165, 0)
    enhancedBypass()
end)

bypassAllBtn.MouseButton1Click:Connect(function()
    statusLabel.Text = "üõ°Ô∏è All bypasses refreshed!"
    statusLabel.TextColor3 = Color3.fromRGB(255, 0, 255)
    enhancedBypass()
end)

protectionModeBtn.MouseButton1Click:Connect(function()
    statusLabel.Text = "üîí Maximum protection is always active!"
    statusLabel.TextColor3 = Color3.fromRGB(255, 20, 147)
    enhancedBypass()
end)

stealthModeBtn.MouseButton1Click:Connect(function()
    statusLabel.Text = "üë§ Stealth mode is always active!"
    statusLabel.TextColor3 = Color3.fromRGB(128, 128, 128)
    enhancedBypass()
end)

-- Hide player list when clicking elsewhere
UserInputService.InputBegan:Connect(function(input, gameProcessed)
    if input.UserInputType == Enum.UserInputType.MouseButton1 and PlayerList.Visible then
        local mouse = LocalPlayer:GetMouse()
        local target = mouse.Target
        
        if not target or (not target:IsDescendantOf(PlayerList) and target ~= playerDropdownBtn) then
            PlayerList.Visible = false
            playerDropdownOpen = false
        end
    end
end)

-- Player events
Players.PlayerAdded:Connect(function()
    if adminModeEnabled then
        updatePlayerList()
    end
end)

Players.PlayerRemoving:Connect(function()
    if adminModeEnabled then
        updatePlayerList()
    end
end)

-- Character respawn handling with bypass reapplication
LocalPlayer.CharacterAdded:Connect(function(newCharacter)
    Character = newCharacter
    Humanoid = Character:WaitForChild("Humanoid")
    RootPart = Character:WaitForChild("HumanoidRootPart")
    
    -- Reapply all active features
    wait(1) -- Wait for character to fully load
    
    if speedHackEnabled then
        pcall(function() Humanoid.WalkSpeed = 100 end)
    end
    
    if godModeEnabled then
        pcall(function() 
            Humanoid.MaxHealth = math.huge
            Humanoid.Health = math.huge
        end)
    end
    
    if invisibleModeEnabled then
        wait(0.5)
        pcall(function()
            for _, part in pairs(Character:GetChildren()) do
                if part:IsA("BasePart") and part.Name ~= "HumanoidRootPart" then
                    part.Transparency = 1
                end
            end
        end)
    end
    
    -- Reapply bypass
    enhancedBypass()
end)

print("üèîÔ∏è Mount Merbabu GUI v1.2 - BYPASS EDITION loaded successfully!")
print("üõ°Ô∏è PROTECTION STATUS:")
print("   ‚úÖ Anti-Kick Protection: ACTIVE")
print("   ‚úÖ Anti-Ban Protection: ACTIVE") 
print("   ‚úÖ FE Bypass: ACTIVE")
print("   ‚úÖ Anti-Detection: ACTIVE")
print("   ‚úÖ GUI Protection: ACTIVE")
print("")
print("‚ú® REGULAR FEATURES:")
print("   - üßó Enhanced Auto Climb System")
print("   - ‚úàÔ∏è Advanced Fly Mode with WASD controls")
print("   - ‚ö° Speed Hack & Jump Boost")
print("   - üìç Teleport to key locations")
print("   - üéí Enhanced Auto Collect items")
print("   - üí™ Infinite Stamina (Multiple Methods)")
print("   - üëÅÔ∏è Advanced ESP for players & items")
print("   - üå§Ô∏è Weather Control")
print("   - üí° Enhanced Fullbright")
print("")
print("üëë ADMIN FEATURES:")
print("   - üõ°Ô∏è God Mode (Complete Invincibility)")
print("   - üëª Noclip (Walk through walls)")
print("   - ü´• Invisible Mode (Complete stealth)")
print("   - üìç Advanced Player Management")
print("   - üë¢ Kick/Ban Players (Multiple methods)")
print("   - üì¢ Server-wide Messages")
print("   - üî¥ Server Control (Shutdown/Crash/Lag)")
print("   - ‚è∞ Time Manipulation")
print("   - üåç Gravity Control (Low/Zero/Normal)")
print("   - üîç Advanced ESP with health bars")
print("   - üîß Infinite Yield Integration")
print("   - ‚å®Ô∏è CMD-X Integration")
print("   - üìù Script Executor")
print("   - üéÆ Game Modifier")
print("")
print("üîë BYPASS FEATURES:")
print("   - üîì FE Bypass (Always Active)")
print("   - üïµÔ∏è Anti-Detection (Always Active)")
print("   - üõ°Ô∏è Complete Protection Suite")
print("   - üîí Maximum Security Mode")
print("   - üë§ Stealth Mode")
print("")
print("üîë Click the üëë button to toggle ADMIN MODE!")
print("üõ°Ô∏è All bypasses are ACTIVE and PROTECTED!")
print("üèîÔ∏è Ready for your ultimate mountain climbing experience!")
